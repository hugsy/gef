language: python

python:
    - "2.7"
    - "3.6"

os:
    - linux

branches:
  only:
    - master
    - dev

addons:
  apt:
    packages:
      - gcc
      - g++
      - pkg-config
      - gdb
      - pylint
      - git
      - cmake
      - libglib2.0-dev

before_script:
  - pip install flake8 ropper keystone-engine capstone unicorn
  - if [ "$TRAVIS_PYTHON_VERSION" != "2.7" ]; then pip install retdec-python; fi
  # stop the build if there are Python syntax errors or undefined names
  ##- flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
  # exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  ##- flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  - echo "source `pwd`/gef.py" > ~/.gdbinit
  - cat ~/.gdbinit

script:
  - gdb -q -ex 'gef help' -ex 'gef config' -ex start -ex continue -ex quit /bin/ls


notifications:
  email:
    recipients:
      - hugsy+github@blah.cat
    on_success: change
    on_failure: always
