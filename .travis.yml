language: python

python:
    - "2.7"
    - "3.6"

os:
    - linux

branches:
  only:
    - master
    - dev

addons:
  apt:
    packages:
      - cmake
      - g++
      - gcc
      - gdb
      - git
      - libglib2.0-dev
      - pkg-config
      - python2.7-dbg
      - python3-all-dbg

install:
  - pip install --upgrade pip setuptools
  - pip install capstone flake8 keystone-engine pylint ropper unicorn
  - echo "source `pwd`/gef.py" > ~/.gdbinit

script:
  - gdb -q -ex r -ex quit --args python -c "import sys ; print(sys.version)"
  - gdb -q -ex 'gef help' -ex 'gef config' -ex 'gef missing' -ex start -ex continue -ex quit /bin/ls

notifications:
  email:
    recipients:
      - hugsy+github@blah.cat
    on_success: change
    on_failure: always
