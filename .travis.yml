group: travis_latest
sudo: required
language: python
cache: pip

python:
  - '2.7'
  - '3.6'

branches:
  only:
    - dev
    - master

addons:
  apt:
    packages:
      - gdb
      - python2.7-dbg
      - python3-all-dbg
      - python3-pip

before_script:
  - /usr/bin/python3 -m pip install --user capstone keystone-engine ropper
  - sudo /usr/bin/python3 -m pip install --user unicorn
  - echo "source `pwd`/gef.py" > ~/.gdbinit

script:
  - gdb -q -ex 'gef help' -ex 'gef config' -ex start -ex continue -ex quit /bin/ls
  # TODO: Reenable the next two lines once hugsy/gef-extras#5 is resolved
  # - scripts/gef-extras.sh
  # - gdb -q -ex 'gef missing' -ex 'gef help' -ex 'gef config' -ex start -ex continue -ex quit /bin/ls


notifications:
  email:
    recipients:
      - hugsy+github@blah.cat
    on_success: change
    on_failure: always
